# Order Service Environment Configuration

# ===== SERVICE CONFIGURATION =====
NODE_ENV=development
PORT=3004
SERVICE_NAME=order-service

# ===== DATABASE =====
DATABASE_URL=postgresql://tickettoken:password@localhost:5432/tickettoken_orders
DATABASE_POOL_MIN=2
DATABASE_POOL_MAX=10

# ===== REDIS =====
REDIS_HOST=localhost
REDIS_PORT=6379
REDIS_PASSWORD=

# ===== JWT AUTHENTICATION =====
JWT_SECRET=your-super-secret-jwt-key-change-this-in-production
JWT_EXPIRES_IN=7d

# ===== EXTERNAL SERVICES =====
TICKET_SERVICE_URL=http://localhost:3001
PAYMENT_SERVICE_URL=http://localhost:3002
EVENT_SERVICE_URL=http://localhost:3005

# ===== EVENT BUS =====
RABBITMQ_URL=amqp://guest:guest@localhost:5672

# ===== LOGGING & OBSERVABILITY =====
LOG_LEVEL=info
ENABLE_METRICS=true

# ===== ORDER CONFIGURATION =====
# Fees (percentages without % symbol)
PLATFORM_FEE_PERCENTAGE=5
PROCESSING_FEE_PERCENTAGE=2.9
PROCESSING_FEE_FIXED_CENTS=30
DEFAULT_TAX_RATE=8

# Reservation settings
RESERVATION_DURATION_MINUTES=15
VIP_RESERVATION_DURATION_MINUTES=30
RESERVATION_GRACE_PERIOD_MINUTES=2

# Order limits
MAX_ORDER_VALUE_CENTS=10000000
MIN_ORDER_VALUE_CENTS=100
MAX_ITEMS_PER_ORDER=50
MAX_QUANTITY_PER_ITEM=10
MAX_ORDERS_PER_USER_PER_DAY=20
MAX_ORDERS_PER_USER_PER_EVENT=5

# Refund configuration
REFUND_CUTOFF_HOURS=24
REFUND_PROCESSING_FEE_RETENTION=2.5
REFUND_AUTO_APPROVE_THRESHOLD_CENTS=50000

# Currency
DEFAULT_CURRENCY=USD
SUPPORTED_CURRENCIES=USD,EUR,GBP

# Pagination
DEFAULT_PAGE_LIMIT=50
MAX_PAGE_LIMIT=100

# ===== BACKGROUND JOBS =====
EXPIRATION_CHECK_INTERVAL_MINUTES=1
METRICS_AGGREGATION_INTERVAL_MINUTES=5

# ===== DISTRIBUTED LOCK =====
DISTRIBUTED_LOCK_TTL_SECONDS=30
DISTRIBUTED_LOCK_RETRY_ATTEMPTS=3
DISTRIBUTED_LOCK_RETRY_DELAY_MS=100

# ===== RATE LIMITING =====
RATE_LIMIT_CREATE_ORDER_PER_MINUTE=10
RATE_LIMIT_RESERVE_ORDER_PER_MINUTE=20

# ===== CORS CONFIGURATION =====
# Comma-separated list of allowed origins
ALLOWED_ORIGINS=http://localhost:3000,http://localhost:3001,https://yourdomain.com

# ===== PCI-DSS COMPLIANCE =====
# MFA Configuration
MFA_ENCRYPTION_KEY=change-this-to-a-strong-random-key-in-production-min-32-chars

# IP Whitelist for Payment Operations (comma-separated IPs or CIDR ranges)
# Use '*' to allow all (NOT recommended for production)
# Example: 192.168.1.100,10.0.0.0/24,203.0.113.42
PAYMENT_IP_WHITELIST=*

# Payment Access Audit Log Retention (years)
PAYMENT_AUDIT_RETENTION_YEARS=7

# Certificate Pinning (for mobile apps)
# SHA-256 hashes of your API SSL certificate public keys
# Generate with: openssl x509 -in cert.pem -pubkey -noout | openssl pkey -pubin -outform der | openssl dgst -sha256 -binary | openssl enc -base64
API_CERT_PIN_PRIMARY=
API_CERT_PIN_BACKUP=
