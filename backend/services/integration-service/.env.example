# Integration Service Environment Variables

# Server Configuration
NODE_ENV=development
PORT=3015
SERVICE_NAME=integration-service

# Database
DATABASE_URL=postgresql://user:password@localhost:5432/tickettoken
DATABASE_POOL_MIN=2
DATABASE_POOL_MAX=10

# Redis
REDIS_HOST=localhost
REDIS_PORT=6379
REDIS_PASSWORD=
REDIS_DB=0

# RabbitMQ
RABBITMQ_URL=amqp://localhost:5672
RABBITMQ_EXCHANGE=integrations
RABBITMQ_QUEUE=integration-jobs

# JWT Authentication
JWT_SECRET=your-jwt-secret-key-change-in-production
JWT_EXPIRATION=24h

# AWS KMS (for credential encryption)
AWS_REGION=us-east-1
AWS_ACCESS_KEY_ID=your-aws-access-key
AWS_SECRET_ACCESS_KEY=your-aws-secret-key
AWS_KMS_KEY_ID=your-kms-key-id
# Set to 'true' only for development - NEVER in production
MOCK_KMS=true
# Development encryption key (only used when MOCK_KMS=true)
ENCRYPTION_KEY=development-key-change-me-32chars

# ==========================================
# STRIPE INTEGRATION
# ==========================================
# Get from: https://dashboard.stripe.com/apikeys
STRIPE_SECRET_KEY=sk_test_xxxxx
STRIPE_PUBLISHABLE_KEY=pk_test_xxxxx
# Get from: https://dashboard.stripe.com/webhooks
STRIPE_WEBHOOK_SECRET=whsec_xxxxx
# Environment: 'live' or 'test'
STRIPE_ENVIRONMENT=test

# ==========================================
# SQUARE INTEGRATION
# ==========================================
# Get from: https://developer.squareup.com/apps
SQUARE_APP_ID=sandbox-sq0idb-xxxxx
SQUARE_APP_SECRET=sandbox-sq0csb-xxxxx
SQUARE_ACCESS_TOKEN=EAAAExxxxx
# Webhook signature key from Square webhook settings
SQUARE_WEBHOOK_SIGNATURE_KEY=xxxxx
# Environment: 'production' or 'sandbox'
SQUARE_ENVIRONMENT=sandbox
# OAuth Redirect URI (must match Square app settings)
SQUARE_OAUTH_REDIRECT_URI=http://localhost:3015/api/v1/integrations/oauth/square/callback

# ==========================================
# MAILCHIMP INTEGRATION
# ==========================================
# Get from: https://admin.mailchimp.com/account/api/
MAILCHIMP_API_KEY=xxxxx-us1
# OAuth credentials (for OAuth flow)
# Get from: https://admin.mailchimp.com/account/oauth2/
MAILCHIMP_CLIENT_ID=xxxxx
MAILCHIMP_CLIENT_SECRET=xxxxx
# OAuth Redirect URI (must match Mailchimp app settings)
MAILCHIMP_OAUTH_REDIRECT_URI=http://localhost:3015/api/v1/integrations/oauth/mailchimp/callback

# ==========================================
# QUICKBOOKS INTEGRATION
# ==========================================
# Get from: https://developer.intuit.com/app/developer/qbo/docs/get-started
QUICKBOOKS_CLIENT_ID=xxxxx
QUICKBOOKS_CLIENT_SECRET=xxxxx
# Webhook verification token (from QuickBooks webhook settings)
QUICKBOOKS_WEBHOOK_TOKEN=xxxxx
# OAuth Redirect URI (must match QuickBooks app settings)
QUICKBOOKS_OAUTH_REDIRECT_URI=http://localhost:3015/api/v1/integrations/oauth/quickbooks/callback
# Environment: 'production' or 'sandbox'
QUICKBOOKS_SANDBOX=true
QUICKBOOKS_ENVIRONMENT=sandbox

# ==========================================
# RATE LIMITING (Per-Provider API Limits)
# ==========================================
# Stripe: 100 requests/second (default)
STRIPE_RATE_LIMIT_MAX=90
STRIPE_RATE_LIMIT_WINDOW=1000

# Square: Varies by endpoint (5-100 req/sec)
SQUARE_RATE_LIMIT_MAX=45
SQUARE_RATE_LIMIT_WINDOW=1000

# Mailchimp: 10 requests/second (120 concurrent)
MAILCHIMP_RATE_LIMIT_MAX=10
MAILCHIMP_RATE_LIMIT_WINDOW=1000

# QuickBooks: 500 requests/minute
QUICKBOOKS_RATE_LIMIT_MAX=500
QUICKBOOKS_RATE_LIMIT_WINDOW=60000

# ==========================================
# SYNC ENGINE CONFIGURATION
# ==========================================
# Max concurrent sync jobs
SYNC_CONCURRENCY=5
# Sync job retry attempts
SYNC_MAX_RETRIES=3
# Sync job timeout (milliseconds)
SYNC_TIMEOUT=300000

# ==========================================
# MONITORING & LOGGING
# ==========================================
LOG_LEVEL=info
# Enable detailed request logging
LOG_REQUESTS=false
# Enable performance metrics
ENABLE_METRICS=true

# ==========================================
# CORS CONFIGURATION
# ==========================================
CORS_ORIGIN=http://localhost:3000,http://localhost:3001
CORS_CREDENTIALS=true

# ==========================================
# OPTIONAL: EXTERNAL SERVICES
# ==========================================
# Sentry for error tracking
SENTRY_DSN=
# DataDog for APM
DATADOG_API_KEY=
