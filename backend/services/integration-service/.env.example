# =============================================================================
# Integration Service Environment Variables
# =============================================================================
# Copy this file to .env and configure for your environment
# DO NOT commit .env files to version control

# =============================================================================
# SERVER CONFIGURATION
# =============================================================================
NODE_ENV=development
PORT=3008
HOST=0.0.0.0
LOG_LEVEL=debug
CORS_ORIGIN=http://localhost:3000

# =============================================================================
# DATABASE CONFIGURATION
# =============================================================================
DATABASE_HOST=localhost
DATABASE_PORT=5432
DATABASE_NAME=integration_service
DATABASE_USER=postgres
DATABASE_PASSWORD=your_secure_password_here
DATABASE_SSL=false
DATABASE_POOL_MIN=2
DATABASE_POOL_MAX=10
DATABASE_IDLE_TIMEOUT=30000
DATABASE_CONNECTION_TIMEOUT=5000

# =============================================================================
# REDIS CONFIGURATION
# =============================================================================
# Required for rate limiting, idempotency, and distributed locks
REDIS_HOST=localhost
REDIS_PORT=6379
REDIS_PASSWORD=
REDIS_DB=0
REDIS_TLS=false

# =============================================================================
# JWT CONFIGURATION
# =============================================================================
# CRITICAL: Use a strong secret (min 32 chars) - generate with: openssl rand -hex 32
JWT_SECRET=your_32_character_minimum_secret_here
JWT_ALGORITHM=HS256
JWT_ISSUER=tickettoken
JWT_AUDIENCE=integration-service

# =============================================================================
# INTERNAL SERVICE AUTH
# =============================================================================
# Used for service-to-service communication
INTERNAL_SERVICE_KEY=your_internal_service_key_here
ALLOWED_SERVICES=auth-service,event-service,ticket-service,payment-service

# =============================================================================
# STRIPE INTEGRATION
# =============================================================================
STRIPE_CLIENT_ID=
STRIPE_CLIENT_SECRET=
STRIPE_WEBHOOK_SECRET=
STRIPE_API_VERSION=2023-10-16

# =============================================================================
# SQUARE INTEGRATION
# =============================================================================
SQUARE_CLIENT_ID=
SQUARE_CLIENT_SECRET=
SQUARE_WEBHOOK_SECRET=
SQUARE_ENVIRONMENT=sandbox

# =============================================================================
# TICKETMASTER INTEGRATION
# =============================================================================
TICKETMASTER_CLIENT_ID=
TICKETMASTER_CLIENT_SECRET=
TICKETMASTER_WEBHOOK_SECRET=

# =============================================================================
# EVENTBRITE INTEGRATION
# =============================================================================
EVENTBRITE_CLIENT_ID=
EVENTBRITE_CLIENT_SECRET=
EVENTBRITE_WEBHOOK_SECRET=

# =============================================================================
# MAILCHIMP INTEGRATION
# =============================================================================
MAILCHIMP_CLIENT_ID=
MAILCHIMP_CLIENT_SECRET=
MAILCHIMP_WEBHOOK_SECRET=

# =============================================================================
# QUICKBOOKS INTEGRATION
# =============================================================================
QUICKBOOKS_CLIENT_ID=
QUICKBOOKS_CLIENT_SECRET=
QUICKBOOKS_WEBHOOK_SECRET=
QUICKBOOKS_ENVIRONMENT=sandbox

# =============================================================================
# INTERNAL SERVICE URLS
# =============================================================================
AUTH_SERVICE_URL=http://localhost:3001
EVENT_SERVICE_URL=http://localhost:3003
TICKET_SERVICE_URL=http://localhost:3004
PAYMENT_SERVICE_URL=http://localhost:3006

# =============================================================================
# SECURITY SETTINGS
# =============================================================================
REQUEST_SIZE_LIMIT=10mb
REQUEST_TIMEOUT=30000

# =============================================================================
# RATE LIMITING
# =============================================================================
RATE_LIMIT_WINDOW_MS=60000
RATE_LIMIT_MAX_REQUESTS=100
RATE_LIMIT_SKIP_SUCCESS=false

# =============================================================================
# SYNC CONFIGURATION
# =============================================================================
SYNC_BATCH_SIZE=100
SYNC_MAX_RETRIES=3
SYNC_RETRY_DELAY_MS=1000
SYNC_TIMEOUT_MS=300000

# =============================================================================
# CIRCUIT BREAKER
# =============================================================================
CB_FAILURE_THRESHOLD=5
CB_SUCCESS_THRESHOLD=2
CB_TIMEOUT_MS=30000
CB_RESET_TIMEOUT_MS=30000

# =============================================================================
# IDEMPOTENCY
# =============================================================================
IDEMPOTENCY_TTL_SECONDS=86400
IDEMPOTENCY_HEADER=x-idempotency-key

# =============================================================================
# WEBHOOKS
# =============================================================================
WEBHOOK_TIMEOUT_MS=30000
WEBHOOK_MAX_RETRIES=3
WEBHOOK_RETRY_DELAY_MS=5000
